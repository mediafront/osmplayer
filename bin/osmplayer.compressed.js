(function(){var a=Math,b=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":/trident/i.test(navigator.userAgent)?"ms":"opera"in window?"O":"",c=/android/gi.test(navigator.appVersion),d=/iphone|ipad/gi.test(navigator.appVersion),e=/playbook/gi.test(navigator.appVersion),h=/hp-tablet/gi.test(navigator.appVersion),i="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,j="ontouchstart"in window&&!h,k=b+"Transform"in document.documentElement.style,l=d||e,t=window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,1)},y=window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout,u="onorientationchange"in window?"orientationchange":"resize",v=j?"touchstart":"mousedown",
q=j?"touchmove":"mousemove",r=j?"touchend":"mouseup",s=j?"touchcancel":"mouseup",w="Moz"==b?"DOMMouseScroll":"mousewheel",n="translate"+(i?"3d(":"("),p=i?",0)":")",e=function(a,f){var g=this,e=document,x;g.wrapper="object"==typeof a?a:e.getElementById(a);g.wrapper.style.overflow="hidden";g.scroller=g.wrapper.children[0];g.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,hScrollbar:!0,vScrollbar:!0,
fixedScrollbar:c,hideScrollbar:d,fadeScrollbar:d&&i,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(a){a.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(x in f)g.options[x]=f[x];g.x=g.options.x;g.y=g.options.y;g.options.useTransform=k?g.options.useTransform:
!1;g.options.hScrollbar=g.options.hScroll&&g.options.hScrollbar;g.options.vScrollbar=g.options.vScroll&&g.options.vScrollbar;g.options.zoom=g.options.useTransform&&g.options.zoom;g.options.useTransition=l&&g.options.useTransition;g.options.zoom&&c&&(n="translate(",p=")");g.scroller.style[b+"TransitionProperty"]=g.options.useTransform?"-"+b.toLowerCase()+"-transform":"top left";g.scroller.style[b+"TransitionDuration"]="0";g.scroller.style[b+"TransformOrigin"]="0 0";g.options.useTransition&&(g.scroller.style[b+
"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)");g.options.useTransform?g.scroller.style[b+"Transform"]=n+g.x+"px,"+g.y+"px"+p:g.scroller.style.cssText+=";position:absolute;top:"+g.y+"px;left:"+g.x+"px";g.options.useTransition&&(g.options.fixedScrollbar=!0);g.refresh();g._bind(u,window);g._bind(v);j||(g._bind("mouseout",g.wrapper),"none"!=g.options.wheelAction&&g._bind(w));g.options.checkDOMChanges&&(g.checkDOMTime=setInterval(function(){g._checkDOMChanges()},500))};e.prototype={enabled:!0,
x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(a){switch(a.type){case v:if(!j&&0!==a.button)break;this._start(a);break;case q:this._move(a);break;case r:case s:this._end(a);break;case u:this._resize();break;case w:this._wheel(a);break;case "mouseout":this._mouseout(a);break;case "webkitTransitionEnd":this._transitionEnd(a)}},_checkDOMChanges:function(){!this.moved&&(!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*
this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale))&&this.refresh()},_scrollbar:function(c){var f=document,g;this[c+"Scrollbar"]?(this[c+"ScrollbarWrapper"]||(g=f.createElement("div"),this.options.scrollbarClass?g.className=this.options.scrollbarClass+c.toUpperCase():g.style.cssText="position:absolute;z-index:100;"+("h"==c?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),g.style.cssText+=";pointer-events:none;-"+
b+"-transition-property:opacity;-"+b+"-transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(g),this[c+"ScrollbarWrapper"]=g,g=f.createElement("div"),this.options.scrollbarClass||(g.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+b+"-background-clip:padding-box;-"+b+"-box-sizing:border-box;"+("h"==c?"height:100%":"width:100%")+";-"+b+
"-border-radius:3px;border-radius:3px"),g.style.cssText+=";pointer-events:none;-"+b+"-transition-property:-"+b+"-transform;-"+b+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+b+"-transition-duration:0;-"+b+"-transform:"+n+"0,0"+p,this.options.useTransition&&(g.style.cssText+=";-"+b+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[c+"ScrollbarWrapper"].appendChild(g),this[c+"ScrollbarIndicator"]=g),"h"==c?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=
a.max(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW>>0,8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=a.max(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH>>0,8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=
this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(c,!0)):this[c+"ScrollbarWrapper"]&&(k&&(this[c+"ScrollbarIndicator"].style[b+"Transform"]=""),this[c+"ScrollbarWrapper"].parentNode.removeChild(this[c+"ScrollbarWrapper"]),this[c+"ScrollbarWrapper"]=null,this[c+"ScrollbarIndicator"]=null)},_resize:function(){var a=this;setTimeout(function(){a.refresh()},c?200:0)},_pos:function(a,c){a=this.hScroll?a:0;c=this.vScroll?c:0;
this.options.useTransform?this.scroller.style[b+"Transform"]=n+a+"px,"+c+"px"+p+" scale("+this.scale+")":(a>>=0,c>>=0,this.scroller.style.left=a+"px",this.scroller.style.top=c+"px");this.x=a;this.y=c;this._scrollbarPos("h");this._scrollbarPos("v")},_scrollbarPos:function(a,c){var g="h"==a?this.x:this.y;this[a+"Scrollbar"]&&(g*=this[a+"ScrollbarProp"],0>g?(this.options.fixedScrollbar||(g=this[a+"ScrollbarIndicatorSize"]+(3*g>>0),8>g&&(g=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=
g+"px"),g=0):g>this[a+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?g=this[a+"ScrollbarMaxScroll"]:(g=this[a+"ScrollbarIndicatorSize"]-(3*(g-this[a+"ScrollbarMaxScroll"])>>0),8>g&&(g=8),this[a+"ScrollbarIndicator"].style["h"==a?"width":"height"]=g+"px",g=this[a+"ScrollbarMaxScroll"]+(this[a+"ScrollbarIndicatorSize"]-g))),this[a+"ScrollbarWrapper"].style[b+"TransitionDelay"]="0",this[a+"ScrollbarWrapper"].style.opacity=c&&this.options.hideScrollbar?"0":"1",this[a+"ScrollbarIndicator"].style[b+
"Transform"]=n+("h"==a?g+"px,0":"0,"+g+"px")+p)},_start:function(c){var f=j?c.touches[0]:c,g,d;if(this.enabled){this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,c);(this.options.useTransition||this.options.zoom)&&this._transitionTime(0);this.zoomed=this.animating=this.moved=!1;this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0;this.options.zoom&&(j&&1<c.touches.length)&&(d=a.abs(c.touches[0].pageX-c.touches[1].pageX),g=a.abs(c.touches[0].pageY-c.touches[1].pageY),
this.touchesDistStart=a.sqrt(d*d+g*g),this.originX=a.abs(c.touches[0].pageX+c.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=a.abs(c.touches[0].pageY+c.touches[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,c));if(this.options.momentum&&(this.options.useTransform?(g=getComputedStyle(this.scroller,null)[b+"Transform"].replace(/[^0-9-.,]/g,"").split(","),d=1*g[4],g=1*g[5]):(d=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,
""),g=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),d!=this.x||g!=this.y))this.options.useTransition?this._unbind("webkitTransitionEnd"):y(this.aniTime),this.steps=[],this._pos(d,g);this.absStartX=this.x;this.absStartY=this.y;this.startX=this.x;this.startY=this.y;this.pointX=f.pageX;this.pointY=f.pageY;this.startTime=c.timeStamp||Date.now();this.options.onScrollStart&&this.options.onScrollStart.call(this,c);this._bind(q);this._bind(r);this._bind(s)}},_move:function(c){var f=j?
c.touches[0]:c,g=f.pageX-this.pointX,d=f.pageY-this.pointY,e=this.x+g,h=this.y+d,i=c.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,c);if(this.options.zoom&&j&&1<c.touches.length)e=a.abs(c.touches[0].pageX-c.touches[1].pageX),h=a.abs(c.touches[0].pageY-c.touches[1].pageY),this.touchesDist=a.sqrt(e*e+h*h),this.zoomed=!0,f=1/this.touchesDistStart*this.touchesDist*this.scale,f<this.options.zoomMin?f=0.5*this.options.zoomMin*Math.pow(2,f/this.options.zoomMin):
f>this.options.zoomMax&&(f=2*this.options.zoomMax*Math.pow(0.5,this.options.zoomMax/f)),this.lastScale=f/this.scale,e=this.originX-this.originX*this.lastScale+this.x,h=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[b+"Transform"]=n+e+"px,"+h+"px"+p+" scale("+f+")",this.options.onZoom&&this.options.onZoom.call(this,c);else{this.pointX=f.pageX;this.pointY=f.pageY;if(0<e||e<this.maxScrollX)e=this.options.bounce?this.x+g/2:0<=e||0<=this.maxScrollX?0:this.maxScrollX;if(h>this.minScrollY||
h<this.maxScrollY)h=this.options.bounce?this.y+d/2:h>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY;this.distX+=g;this.distY+=d;this.absDistX=a.abs(this.distX);this.absDistY=a.abs(this.distY);6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(h=this.y,d=0):this.absDistY>this.absDistX+5&&(e=this.x,g=0)),this.moved=!0,this._pos(e,h),this.dirX=0<g?-1:0>g?1:0,this.dirY=0<d?-1:0>d?1:0,300<i-this.startTime&&(this.startTime=i,this.startX=
this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,c))}},_end:function(c){if(!(j&&0!=c.touches.length)){var f=this,g=j?c.changedTouches[0]:c,d,e,h={dist:0,time:0},i={dist:0,time:0},k=(c.timeStamp||Date.now())-f.startTime,l=f.x,m=f.y;f._unbind(q);f._unbind(r);f._unbind(s);f.options.onBeforeScrollEnd&&f.options.onBeforeScrollEnd.call(f,c);if(f.zoomed)l=f.scale*f.lastScale,l=Math.max(f.options.zoomMin,l),l=Math.min(f.options.zoomMax,l),f.lastScale=l/f.scale,f.scale=
l,f.x=f.originX-f.originX*f.lastScale+f.x,f.y=f.originY-f.originY*f.lastScale+f.y,f.scroller.style[b+"TransitionDuration"]="200ms",f.scroller.style[b+"Transform"]=n+f.x+"px,"+f.y+"px"+p+" scale("+f.scale+")",f.zoomed=!1,f.refresh(),f.options.onZoomEnd&&f.options.onZoomEnd.call(f,c);else{if(f.moved){if(300>k&&f.options.momentum){h=l?f._momentum(l-f.startX,k,-f.x,f.scrollerW-f.wrapperW+f.x,f.options.bounce?f.wrapperW:0):h;i=m?f._momentum(m-f.startY,k,-f.y,0>f.maxScrollY?f.scrollerH-f.wrapperH+f.y-f.minScrollY:
0,f.options.bounce?f.wrapperH:0):i;l=f.x+h.dist;m=f.y+i.dist;if(0<f.x&&0<l||f.x<f.maxScrollX&&l<f.maxScrollX)h={dist:0,time:0};if(f.y>f.minScrollY&&m>f.minScrollY||f.y<f.maxScrollY&&m<f.maxScrollY)i={dist:0,time:0}}h.dist||i.dist?(h=a.max(a.max(h.time,i.time),10),f.options.snap&&(i=l-f.absStartX,k=m-f.absStartY,a.abs(i)<f.options.snapThreshold&&a.abs(k)<f.options.snapThreshold?f.scrollTo(f.absStartX,f.absStartY,200):(i=f._snap(l,m),l=i.x,m=i.y,h=a.max(i.time,h))),f.scrollTo(l>>0,m>>0,h)):f.options.snap?
(i=l-f.absStartX,k=m-f.absStartY,a.abs(i)<f.options.snapThreshold&&a.abs(k)<f.options.snapThreshold?f.scrollTo(f.absStartX,f.absStartY,200):(i=f._snap(f.x,f.y),(i.x!=f.x||i.y!=f.y)&&f.scrollTo(i.x,i.y,i.time))):f._resetPos(200)}else j&&(f.doubleTapTimer&&f.options.zoom?(clearTimeout(f.doubleTapTimer),f.doubleTapTimer=null,f.options.onZoomStart&&f.options.onZoomStart.call(f,c),f.zoom(f.pointX,f.pointY,1==f.scale?f.options.doubleTapZoom:1),f.options.onZoomEnd&&setTimeout(function(){f.options.onZoomEnd.call(f,
c)},200)):f.doubleTapTimer=setTimeout(function(){f.doubleTapTimer=null;for(d=g.target;1!=d.nodeType;)d=d.parentNode;"SELECT"!=d.tagName&&("INPUT"!=d.tagName&&"TEXTAREA"!=d.tagName)&&(e=document.createEvent("MouseEvents"),e.initMouseEvent("click",!0,!0,c.view,1,g.screenX,g.screenY,g.clientX,g.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null),e._fake=!0,d.dispatchEvent(e))},f.options.zoom?250:0)),f._resetPos(200);f.options.onTouchEnd&&f.options.onTouchEnd.call(f,c)}}},_resetPos:function(a){var c=
0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,g=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;c==this.x&&g==this.y?(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==b&&(this.hScrollbarWrapper.style[b+"TransitionDelay"]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar&&("webkit"==b&&(this.vScrollbarWrapper.style[b+
"TransitionDelay"]="300ms"),this.vScrollbarWrapper.style.opacity="0")):this.scrollTo(c,g,a||0)},_wheel:function(a){var b=this,c,d;if("wheelDeltaX"in a)c=a.wheelDeltaX/12,d=a.wheelDeltaY/12;else if("wheelDelta"in a)c=d=a.wheelDelta/12;else if("detail"in a)c=d=3*-a.detail;else return;"zoom"==b.options.wheelAction?(d=b.scale*Math.pow(2,1/3*(d?d/Math.abs(d):0)),d<b.options.zoomMin&&(d=b.options.zoomMin),d>b.options.zoomMax&&(d=b.options.zoomMax),d!=b.scale&&(!b.wheelZoomCount&&b.options.onZoomStart&&
b.options.onZoomStart.call(b,a),b.wheelZoomCount++,b.zoom(a.pageX,a.pageY,d,400),setTimeout(function(){b.wheelZoomCount--;!b.wheelZoomCount&&b.options.onZoomEnd&&b.options.onZoomEnd.call(b,a)},400))):(c=b.x+c,d=b.y+d,0<c?c=0:c<b.maxScrollX&&(c=b.maxScrollX),d>b.minScrollY?d=b.minScrollY:d<b.maxScrollY&&(d=b.maxScrollY),b.scrollTo(c,d,0))},_mouseout:function(a){var b=a.relatedTarget;if(b)for(;b=b.parentNode;)if(b==this.wrapper)return;this._end(a)},_transitionEnd:function(a){a.target==this.scroller&&
(this._unbind("webkitTransitionEnd"),this._startAni())},_startAni:function(){var b=this,c=b.x,d=b.y,e=Date.now(),h,i,l;b.animating||(b.steps.length?(h=b.steps.shift(),h.x==c&&h.y==d&&(h.time=0),b.animating=!0,b.moved=!0,b.options.useTransition?(b._transitionTime(h.time),b._pos(h.x,h.y),b.animating=!1,h.time?b._bind("webkitTransitionEnd"):b._resetPos(0)):(l=function(){var k=Date.now(),j;k>=e+h.time?(b._pos(h.x,h.y),b.animating=!1,b.options.onAnimationEnd&&b.options.onAnimationEnd.call(b),b._startAni()):
(k=(k-e)/h.time-1,i=a.sqrt(1-k*k),k=(h.x-c)*i+c,j=(h.y-d)*i+d,b._pos(k,j),b.animating&&(b.aniTime=t(l)))},l())):b._resetPos(400))},_transitionTime:function(a){a+="ms";this.scroller.style[b+"TransitionDuration"]=a;this.hScrollbar&&(this.hScrollbarIndicator.style[b+"TransitionDuration"]=a);this.vScrollbar&&(this.vScrollbarIndicator.style[b+"TransitionDuration"]=a)},_momentum:function(b,c,d,e,h){var c=a.abs(b)/c,i=c*c/0.0012;0<b&&i>d?(d+=h/(6/(6E-4*(i/c))),c=c*d/i,i=d):0>b&&i>e&&(e+=h/(6/(6E-4*(i/c))),
c=c*e/i,i=e);return{dist:i*(0>b?-1:1),time:c/6E-4>>0}},_offset:function(a){for(var b=-a.offsetLeft,c=-a.offsetTop;a=a.offsetParent;)b-=a.offsetLeft,c-=a.offsetTop;a!=this.wrapper&&(b*=this.scale,c*=this.scale);return{left:b,top:c}},_snap:function(b,c){var d,e,h;h=this.pagesX.length-1;d=0;for(e=this.pagesX.length;d<e;d++)if(b>=this.pagesX[d]){h=d;break}h==this.currPageX&&(0<h&&0>this.dirX)&&h--;b=this.pagesX[h];e=(e=a.abs(b-this.pagesX[this.currPageX]))?500*(a.abs(this.x-b)/e):0;this.currPageX=h;h=
this.pagesY.length-1;for(d=0;d<h;d++)if(c>=this.pagesY[d]){h=d;break}h==this.currPageY&&(0<h&&0>this.dirY)&&h--;c=this.pagesY[h];d=(d=a.abs(c-this.pagesY[this.currPageY]))?500*(a.abs(this.y-c)/d):0;this.currPageY=h;h=a.max(e,d)>>0;return{x:b,y:c,time:h||200}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){this.scroller.style[b+"Transform"]="";this.vScrollbar=this.hScrollbar=!1;this._scrollbar("h");
this._scrollbar("v");this._unbind(u,window);this._unbind(v);this._unbind(q);this._unbind(r);this._unbind(s);this.options.hasTouch||(this._unbind("mouseout",this.wrapper),this._unbind(w));this.options.useTransition&&this._unbind("webkitTransitionEnd");this.options.checkDOMChanges&&clearInterval(this.checkDOMTime);this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var a,c,d,e=0;c=0;this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin);this.wrapperW=this.wrapper.clientWidth||
1;this.wrapperH=this.wrapper.clientHeight||1;this.minScrollY=-this.options.topOffset||0;this.scrollerW=this.scroller.offsetWidth*this.scale>>0;this.scrollerH=(this.scroller.offsetHeight+this.minScrollY)*this.scale>>0;this.maxScrollX=this.wrapperW-this.scrollerW;this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY;this.dirY=this.dirX=0;this.options.onRefresh&&this.options.onRefresh.call(this);this.hScroll=this.options.hScroll&&0>this.maxScrollX;this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&
!this.hScroll||this.scrollerH>this.wrapperH);this.hScrollbar=this.hScroll&&this.options.hScrollbar;this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH;a=this._offset(this.wrapper);this.wrapperOffsetLeft=-a.left;this.wrapperOffsetTop=-a.top;if("string"==typeof this.options.snap){this.pagesX=[];this.pagesY=[];d=this.scroller.querySelectorAll(this.options.snap);a=0;for(c=d.length;a<c;a++)e=this._offset(d[a]),e.left+=this.wrapperOffsetLeft,e.top+=this.wrapperOffsetTop,
this.pagesX[a]=e.left<this.maxScrollX?this.maxScrollX:e.left*this.scale,this.pagesY[a]=e.top<this.maxScrollY?this.maxScrollY:e.top*this.scale}else if(this.options.snap){for(this.pagesX=[];e>=this.maxScrollX;)this.pagesX[c]=e,e-=this.wrapperW,c++;this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]);c=e=0;for(this.pagesY=[];e>=this.maxScrollY;)this.pagesY[c]=e,e-=this.wrapperH,c++;this.maxScrollY%this.wrapperH&&
(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h");this._scrollbar("v");this.zoomed||(this.scroller.style[b+"TransitionDuration"]="0",this._resetPos(200))},scrollTo:function(a,b,c,d){var e=a;this.stop();e.length||(e=[{x:a,y:b,time:c,relative:d}]);a=0;for(b=e.length;a<b;a++)e[a].relative&&(e[a].x=this.x-e[a].x,e[a].y=this.y-e[a].y),this.steps.push({x:e[a].x,y:e[a].y,time:e[a].time||0});this._startAni()},scrollToElement:function(b,
c){var d;if(b=b.nodeType?b:this.scroller.querySelector(b))d=this._offset(b),d.left+=this.wrapperOffsetLeft,d.top+=this.wrapperOffsetTop,d.left=0<d.left?0:d.left<this.maxScrollX?this.maxScrollX:d.left,d.top=d.top>this.minScrollY?this.minScrollY:d.top<this.maxScrollY?this.maxScrollY:d.top,c=void 0===c?a.max(2*a.abs(d.left),2*a.abs(d.top)):c,this.scrollTo(d.left,d.top,c)},scrollToPage:function(a,b,c){c=void 0===c?400:c;this.options.onScrollStart&&this.options.onScrollStart.call(this);this.options.snap?
(a="next"==a?this.currPageX+1:"prev"==a?this.currPageX-1:a,b="next"==b?this.currPageY+1:"prev"==b?this.currPageY-1:b,a=0>a?0:a>this.pagesX.length-1?this.pagesX.length-1:a,b=0>b?0:b>this.pagesY.length-1?this.pagesY.length-1:b,this.currPageX=a,this.currPageY=b,a=this.pagesX[a],b=this.pagesY[b]):(a*=-this.wrapperW,b*=-this.wrapperH,a<this.maxScrollX&&(a=this.maxScrollX),b<this.maxScrollY&&(b=this.maxScrollY));this.scrollTo(a,b,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=!1;this._unbind(q);
this._unbind(r);this._unbind(s)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):y(this.aniTime);this.steps=[];this.animating=this.moved=!1},zoom:function(a,c,d,e){var h=d/this.scale;this.options.useTransform&&(this.zoomed=!0,e=void 0===e?200:e,a=a-this.wrapperOffsetLeft-this.x,c=c-this.wrapperOffsetTop-this.y,this.x=a-a*h+this.x,this.y=c-c*h+this.y,this.scale=d,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:
this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[b+"TransitionDuration"]=e+"ms",this.scroller.style[b+"Transform"]=n+this.x+"px,"+this.y+"px"+p+" scale("+d+")",this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}};"undefined"!==typeof exports?exports.iScroll=e:window.iScroll=e})();var minplayer=minplayer||{};
function checkPlayType(a,b){if("function"===typeof a.canPlayType){if("object"===typeof b){for(var c=b.length,d="";c--&&!(d=checkPlayType(a,b[c])););return d}c=a.canPlayType(b);if("no"!==c&&""!==c)return b}return""}
minplayer.compatibility=function(){var a=null,a=document.createElement("video");this.videoOGG=checkPlayType(a,"video/ogg");this.videoH264=checkPlayType(a,["video/mp4","video/h264"]);this.videoWEBM=checkPlayType(a,["video/x-webm","video/webm","application/octet-stream"]);a=document.createElement("audio");this.audioOGG=checkPlayType(a,"audio/ogg");this.audioMP3=checkPlayType(a,"audio/mpeg");this.audioMP4=checkPlayType(a,"audio/mp4")};
minplayer.playTypes||(minplayer.playTypes=new minplayer.compatibility,minplayer.isAndroid=/android/gi.test(navigator.appVersion),minplayer.isIDevice=/iphone|ipad/gi.test(navigator.appVersion),minplayer.isPlaybook=/playbook/gi.test(navigator.appVersion),minplayer.isTouchPad=/hp-tablet/gi.test(navigator.appVersion),minplayer.hasTouch="ontouchstart"in window&&!minplayer.isTouchPad);minplayer=minplayer||{};minplayer.async=function(){this.value=null;this.queue=[]};
minplayer.async.prototype.get=function(a){null!==this.value?a(this.value):this.queue.push(a)};minplayer.async.prototype.set=function(a){this.value=a;var b=this.queue.length;if(b){for(;b--;)this.queue[b](a);this.queue=[]}};minplayer=minplayer||{};minplayer.flags=function(){this.flag=0;this.ids={};this.numFlags=0};minplayer.flags.prototype.setFlag=function(a,b){this.ids.hasOwnProperty(a)||(this.ids[a]=this.numFlags,this.numFlags++);this.flag=b?this.flag|1<<this.ids[a]:this.flag&~(1<<this.ids[a])};
minplayer=minplayer||{};minplayer.plugins=minplayer.plugins||{};minplayer.queue=minplayer.queue||[];minplayer.lock=!1;minplayer.plugin=function(a,b,c,d){this.name=a;this.pluginReady=!1;this.options=c||{};this.queue=d||{};this.triggered={};this.lock=!1;b&&(this.active=!0,this.context=jQuery(b),this.construct())};minplayer.plugin.prototype.construct=function(){this.addPlugin()};minplayer.plugin.prototype.destroy=function(){this.active=!1;this.unbind()};
minplayer.plugin.prototype.create=function(a,b,c){var d=null,b=b||"minplayer";window[b][a]||(b="minplayer");c=c||this.display;return window[b][a]&&(d=window[b][a],d[this.options.template]&&(d=d[this.options.template]),"function"!==typeof d&&(d=window.minplayer[a]),"function"===typeof d)?new d(c,this.options):null};minplayer.plugin.prototype.ready=function(){this.pluginReady||(this.pluginReady=!0,this.trigger("ready"),this.checkQueue())};
minplayer.plugin.prototype.isValid=function(){return!!this.options.id&&this.active};minplayer.plugin.prototype.addPlugin=function(a,b){a=a||this.name;b=b||this;b.isValid()&&(minplayer.plugins[this.options.id]||(minplayer.plugins[this.options.id]={}),minplayer.plugins[this.options.id][a]||(minplayer.plugins[this.options.id][a]=[]),minplayer.plugins[this.options.id][a].push(b),this.checkQueue(b))};
minplayer.plugin.prototype.poll=function(a,b){var c=this;setTimeout(function e(){a.call(c)&&setTimeout(e,b)},b)};minplayer.plugin.prototype.get=function(a,b){"function"===typeof a&&(b=a,a=null);return minplayer.get.call(this,this.options.id,a,b)};
minplayer.plugin.prototype.checkQueue=function(a){var b=null,c=0,d=!1,e=[],a=a||this;minplayer.lock=!0;for(var h=minplayer.queue.length,c=0;c<h;c++)minplayer.queue.hasOwnProperty(c)&&(b=minplayer.queue[c],d=!b.id&&!b.plugin,d|=b.plugin==a.name,(d&=!b.id||b.id==this.options.id)&&(d=minplayer.bind.call(b.context,b.event,this.options.id,a.name,b.callback,!0)),d||e.push(b));minplayer.queue=e;minplayer.lock=!1};
minplayer.plugin.prototype.trigger=function(a,b){if(!this.active)return this;this.triggered[a]=b;if(this.queue.hasOwnProperty(a)){var c=0,d={},e=this.queue[a];for(c in e)e.hasOwnProperty(c)&&(d=e[c],d.callback({target:this,data:d.data},b))}return this};
minplayer.plugin.prototype.bind=function(a,b,c){if(!this.active)return this;"function"===typeof b&&(c=b,b=null);if(a&&c)return this.queue[a]=this.queue[a]||[],this.unbind(a,c),this.queue[a].push({callback:c,data:b}),this.triggered.hasOwnProperty(a)&&c({target:this,data:b},this.triggered[a]),this};
minplayer.plugin.prototype.unbind=function(a,b){if(this.lock){var c=this;setTimeout(function(){c.unbind(a,b)},10)}this.lock=!0;var d=this.queue.hasOwnProperty(a)?this.queue[a]:null;if(a)if(b){if(d){var e=0,h={};for(e in d)d.hasOwnProperty(e)&&d[e].callback===b&&(h=this.queue[a].splice(e,1),delete h)}}else this.queue[a]=[];else this.queue={};this.lock=!1;return this};
minplayer.addQueue=function(a,b,c,d,e){minplayer.lock?setTimeout(function(){minplayer.addQueue(a,c,b,d,e)},10):minplayer.queue.push({context:a,id:c,event:b,plugin:d,callback:e})};
minplayer.bind=function(a,b,c,d,e){if(!d)return!1;var h=minplayer.plugins,i=[],j=function(a,b){if(h.hasOwnProperty(a)&&h[a].hasOwnProperty(b))for(var c=h[a][b].length;c--;)i.push(h[a][b][c])};if(b&&c)j(b,c);else if(!b&&c)for(b in h)j(b,c);else if(b&&!c&&h[b])for(c in h[b])j(b,c);else if(!b&&!c)for(b in h)for(c in h[b])j(b,c);for(j=i.length;j--;)i[j].bind(a,function(a){return function(b){d.call(a,b.target)}}(this));0==i.length&&!e&&minplayer.addQueue(this,a,b,c,d);return 0<i.length};
minplayer.get=function(a,b,c){"function"===typeof a&&(c=a,b=a=null);"function"===typeof b&&(c=b,b=a,a=null);if(c="function"===typeof c?c:null)minplayer.bind.call(this,"ready",a,b,c);else{var d=minplayer.plugins;if(!a&&!b&&!c)return d;if(a&&!b&&!c)return d[a];if(a&&b&&!c)return d[a][b];if(!a&&b&&!c){c=[];for(a in d)if(d.hasOwnProperty(a)&&d[a].hasOwnProperty(b))for(var e=d[a][b].length;e--;)c.push(d[a][b][e]);return c}}};minplayer=minplayer||{};
minplayer.display=function(a,b,c,d){minplayer.plugin.call(this,a,b,c,d)};minplayer.display.prototype=new minplayer.plugin;minplayer.display.prototype.constructor=minplayer.display;minplayer.display.prototype.getDisplay=function(){return this.context};
minplayer.display.prototype.construct=function(){this.display=this.getDisplay(this.context,this.options);minplayer.plugin.prototype.construct.call(this);this.options.pluginName="display";this.elements=this.getElements();if(this.onResize){var a=0;jQuery(window).resize(function(b){return function(){clearTimeout(a);a=setTimeout(function(){b.onResize()},200)}}(this))}};minplayer.display.prototype.onResize=!1;minplayer.display.prototype.hide=function(a){if(a=a||this.display)a.forceHide=!0,a.unbind().hide()};
minplayer.display.prototype.fullScreenElement=function(){return this.display};minplayer.click=function(a,b){var c=!1,a=jQuery(a);a.bind("touchstart click",function(a){c||(c=!0,setTimeout(function(){c=!1},100),b.call(this,a))});return a};minplayer.display.prototype.onFocus=function(a){this.hasFocus=this.focus=a};minplayer.showHideElements=[];
minplayer.showAll=function(){for(var a=minplayer.showHideElements.length,b=null;a--;)b=minplayer.showHideElements[a],minplayer.showThenHide(b.element,b.timeout,b.callback)};minplayer.stopShowThenHide=function(a){a=jQuery(a);a.showTimer&&clearTimeout(a.showTimer);a.stopShowThenHide=!0;a.shown=!0;a.show()};
minplayer.showThenHide=function(a,b,c){a&&(b=b||5E3,a.showTimer||(a.shown=!0,a.stopShowThenHide=!1,minplayer.showHideElements.push({element:a,timeout:b,callback:c}),minplayer.click(document,function(){a.stopShowThenHide||minplayer.showThenHide(a,b,c)}),jQuery(document).bind("mousemove",function(){a.stopShowThenHide||minplayer.showThenHide(a,b,c)})),clearTimeout(a.showTimer),!a.shown&&!a.forceHide&&(a.shown=!0,a.show(),c&&c(!0)),a.showTimer=setTimeout(function(){a.hide("slow",function(){a.shown=!1;
c&&c(!1)})},b))};minplayer.display.prototype.fullscreen=function(a){var b=this.isFullScreen(),c=this.fullScreenElement();if(b&&!a)c.removeClass("fullscreen"),screenfull&&screenfull.exit(),this.trigger("fullscreen",!1);else if(!b&&a){c.addClass("fullscreen");if(screenfull){screenfull.request(c[0]);var d=this;screenfull.onchange=function(){screenfull.isFullscreen||d.fullscreen(!1)}}this.trigger("fullscreen",!0)}};minplayer.display.prototype.toggleFullScreen=function(){this.fullscreen(!this.isFullScreen())};
minplayer.display.prototype.isFullScreen=function(){return this.fullScreenElement().hasClass("fullscreen")};minplayer.display.prototype.getScaledRect=function(a,b){var c={};c.x=b.x?b.x:0;c.y=b.y?b.y:0;c.width=b.width?b.width:0;c.height=b.height?b.height:0;a&&(b.width/b.height>a?(c.height=b.height,c.width=Math.floor(b.height*a)):(c.height=Math.floor(b.width/a),c.width=b.width),c.x=Math.floor((b.width-c.width)/2),c.y=Math.floor((b.height-c.height)/2));return c};
minplayer.display.prototype.getElements=function(){return{}};
(function(a,b){var c;a:{for(var d=[["requestFullscreen","exitFullscreen","fullscreenchange","fullscreen","fullscreenElement"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange","webkitIsFullScreen","webkitCurrentFullScreenElement"],["mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozFullScreen","mozFullScreenElement"]],e=0,h=d.length;e<h;e++)if(d.hasOwnProperty(e)){var i=d[e];if(i[1]in b){c=i;break a}}c=void 0}if(!c)return a.screenfull=!1;var j="ALLOW_KEYBOARD_INPUT"in
Element,k={init:function(){b.addEventListener(c[2],function(a){k.isFullscreen=b[c[3]];k.element=b[c[4]];k.onchange(a)});return this},isFullscreen:b[c[3]],element:b[c[4]],request:function(a){a=a||b.documentElement;a[c[0]](j&&Element.ALLOW_KEYBOARD_INPUT);if(!b.isFullscreen)a[c[0]]()},exit:function(){b[c[1]]()},toggle:function(a){this.isFullscreen?this.exit():this.request(a)},onchange:function(){}};a.screenfull=k.init()})(window,document);
jQuery.fn.minplayer||(jQuery.fn.minplayer=function(a){return jQuery(this).each(function(){a=a||{};a.id=a.id||jQuery(this).attr("id")||Math.random();minplayer.plugins[a.id]||(a.template=a.template||"default",minplayer[a.template]?new minplayer[a.template](jQuery(this),a):new minplayer(jQuery(this),a))})});minplayer=jQuery.extend(function(a,b){minplayer.display.call(this,"player",a,b)},minplayer);minplayer.prototype=new minplayer.display;minplayer.prototype.constructor=minplayer;
minplayer.prototype.construct=function(){jQuery.each(this.context[0].attributes,function(a){return function(c,d){a.options[d.name]=a.options[d.name]||d.value}}(this));this.options=jQuery.extend({id:"player",build:!1,wmode:"transparent",preload:!0,autoplay:!1,autoload:!0,loop:!1,width:"100%",height:"350px",debug:!1,volume:80,files:null,file:"",preview:"",attributes:{},logo:"",link:"",width:"100%",height:"100%"},this.options);minplayer.display.prototype.construct.call(this);this.options.pluginName=
"player";this.controller=this.create("controller");this.playLoader=this.create("playLoader");minplayer.click(document,function(a){return function(c){var d=0!=jQuery(c.target).closest("#"+a.options.id).length;minplayer.get.call(this,a.options.id,null,function(a){a.onFocus(d)})}}(this));if(this.options.logo&&this.elements.logo){var a="";this.options.link&&(a+='<a target="_blank" href="'+this.options.link+'">');a+='<img src="'+this.options.logo+'" >';this.options.link&&(a+="</a>");this.logo=this.elements.logo.append(a)}this.currentPlayer=
"html5";this.addKeyEvents();this.addEvents();this.load(this.getFiles());this.ready()};minplayer.prototype.bindTo=function(a){a.bind("error",function(a){return function(c,d){"html5"==a.currentPlayer?(minplayer.player="minplayer",a.options.file.player="minplayer",a.loadPlayer()):a.showError(d)}}(this));a.bind("fullscreen",function(a){return function(){a.resize()}}(this))};minplayer.prototype.addEvents=function(){minplayer.get.call(this,this.options.id,null,function(a){return function(b){a.bindTo(b)}}(this))};
minplayer.prototype.showError=function(a){if("object"!==typeof a&&(a=a||"",this.elements.error))if(this.elements.error.text(a),a){this.elements.error.show();var b=this;setTimeout(function(){b.elements.error.hide("slow")},5E3)}else this.elements.error.hide()};minplayer.prototype.addKeyEvents=function(){jQuery(document).bind("keydown",function(a){return function(b){switch(b.keyCode){case 113:case 27:a.isFullScreen()&&a.fullscreen(!1)}}}(this))};
minplayer.prototype.getFiles=function(){if(this.options.files)return this.options.files;if(this.options.file)return this.options.file;var a=[],b=null;this.elements.media&&((b=this.elements.media.attr("src"))&&a.push({path:b}),jQuery("source",this.elements.media).each(function(){a.push({path:jQuery(this).attr("src"),mimetype:jQuery(this).attr("type"),codecs:jQuery(this).attr("codecs")})}));return a};
minplayer.getMediaFile=function(a){if(!a)return null;if("string"===typeof a||a.path||a.id)return new minplayer.file(a);var b=null,c=null,d;for(d in a)a.hasOwnProperty(d)&&(c=new minplayer.file(a[d]),c.player&&0<c.priority&&(b=c));return b};
minplayer.prototype.loadPlayer=function(){if(!this.options.file||0==this.elements.display.length||!this.options.file.player)return!1;this.showError();var a=this.options.file.player.toString();if(!this.media||a!==this.currentPlayer){this.currentPlayer=a;if(this.elements.display)return a={},this.media&&(a=this.media.queue,this.media.destroy()),pClass=minplayer.players[this.options.file.player],this.options.mediaelement=this.elements.media,this.media=new pClass(this.elements.display,this.options,a),
this.get("media",function(a){return function(c){c.load(a.options.file);a.display.addClass("minplayer-player-"+c.mediaFile.player)}}(this)),!0;this.showError("No media display found.")}else if(this.media)return this.media.options=this.options,this.display.removeClass("minplayer-player-"+this.media.mediaFile.player),this.media.load(this.options.file),this.display.addClass("minplayer-player-"+this.media.mediaFile.player),!1};
minplayer.prototype.load=function(a){this.options.files=a||this.options.files;this.options.file=minplayer.getMediaFile(this.options.files);this.loadPlayer()&&(this.bindTo(this.media),this.options.file.mimetype&&!this.options.file.player&&this.showError("Cannot play media: "+this.options.file.mimetype))};minplayer.prototype.resize=function(){this.get(function(a){if(a.onResize)a.onResize()})};minplayer=minplayer||{};
minplayer.image=function(a,b){this.loaded=!1;this.loader=null;this.ratio=0;this.img=null;minplayer.display.call(this,"image",a,b)};minplayer.image.prototype=new minplayer.display;minplayer.image.prototype.constructor=minplayer.image;
minplayer.image.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.options.pluginName="image";this.display.css("overflow","hidden");this.loader=new Image;var a=this;this.loader.onload=function(){a.loaded=!0;a.ratio=a.loader.width/a.loader.height;a.resize();a.trigger("loaded")};this.ready()};
minplayer.image.prototype.load=function(a){this.clear(function(){this.display.empty();this.img=jQuery(document.createElement("img")).attr({src:""}).hide();this.display.append(this.img);this.loader.src=a;this.img.attr("src",a)})};minplayer.image.prototype.clear=function(a){this.loaded=!1;this.img?this.img.fadeOut(function(b){return function(){b.img.attr("src","");b.loader.src="";jQuery(this).remove();a.call(b)}}(this)):a.call(this)};
minplayer.image.prototype.resize=function(a,b){a=a||this.display.parent().width();b=b||this.display.parent().height();if(a&&b&&this.loaded){var c=this.getScaledRect(this.ratio,{width:a,height:b});this.img&&this.img.attr("src",this.loader.src).css({marginLeft:c.x,marginTop:c.y,width:c.width,height:c.height});this.img.fadeIn()}};minplayer.image.prototype.onResize=function(){this.resize()};minplayer=minplayer||{};
minplayer.file=function(a){if(!a)return null;a="string"===typeof a?{path:a}:a;if(a.hasOwnProperty("isMinPlayerFile"))return a;this.isMinPlayerFile=!0;this.duration=a.duration||0;this.bytesTotal=a.bytesTotal||0;this.quality=a.quality||0;this.stream=a.stream||"";this.path=a.path||"";this.codecs=a.codecs||"";this.extension=a.extension||this.getFileExtension();this.mimetype=a.mimetype||a.filemime||this.getMimeType();this.type=a.type||this.getType();this.type||(this.mimetype=this.getMimeType(),this.type=
this.getType());this.player=minplayer.player||a.player||this.getBestPlayer();this.priority=a.priority||this.getPriority();this.id=a.id||this.getId();this.path||(this.path=this.id)};minplayer.player="";minplayer.file.prototype.getBestPlayer=function(){var a=null,b=0;jQuery.each(minplayer.players,function(c){return function(d,e){var h=e.getPriority(c);e.canPlay(c)&&h>b&&(a=d,b=h)}}(this));return a};
minplayer.file.prototype.getPriority=function(){var a=1;this.player&&(a=minplayer.players[this.player].getPriority(this));switch(this.mimetype){case "video/x-webm":case "video/webm":case "application/octet-stream":return 10*a;case "video/mp4":case "audio/mp4":case "audio/mpeg":return 9*a;case "video/ogg":case "audio/ogg":case "video/quicktime":return 8*a;default:return 5*a}};minplayer.file.prototype.getFileExtension=function(){return this.path.substring(this.path.lastIndexOf(".")+1).toLowerCase()};
minplayer.file.prototype.getMimeType=function(){switch(this.extension){case "mp4":case "m4v":case "flv":case "f4v":return"video/mp4";case "webm":return"video/webm";case "ogg":case "ogv":return"video/ogg";case "3g2":return"video/3gpp2";case "3gpp":case "3gp":return"video/3gpp";case "mov":return"video/quicktime";case "swf":return"application/x-shockwave-flash";case "oga":return"audio/ogg";case "mp3":return"audio/mpeg";case "m4a":case "f4a":return"audio/mp4";case "aac":return"audio/aac";case "wav":return"audio/vnd.wave";
case "wma":return"audio/x-ms-wma";default:return"unknown"}};minplayer.file.prototype.getType=function(){var a=this.mimetype.match(/([^\/]+)(\/)/),a=a&&1<a.length?a[1]:"";return"video"==a||"application/octet-stream"==this.mimetype?"video":"audio"==a?"audio":""};minplayer.file.prototype.getId=function(){var a=minplayer.players[this.player];return a&&a.getMediaId?a.getMediaId(this):""};minplayer=minplayer||{};
minplayer.playLoader=function(a,b){this.busy=new minplayer.flags;this.bigPlay=new minplayer.flags;this.previewFlag=new minplayer.flags;this.preview=null;this.enabled=!0;minplayer.display.call(this,"playLoader",a,b)};minplayer.playLoader.prototype=new minplayer.display;minplayer.playLoader.prototype.constructor=minplayer.playLoader;minplayer.playLoader.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.options.pluginName="playLoader";this.initialize();this.ready()};
minplayer.playLoader.prototype.initialize=function(){this.get("media",function(a){a.hasPlayLoader(this.options.preview)?(this.enabled=!1,this.hide(this.elements.busy),this.hide(this.elements.bigPlay),this.hide(this.elements.preview),this.hide()):(this.enabled=!0,this.options.preview||(this.options.preview=a.elements.media.attr("poster")),a.elements.media.attr("poster",""),this.loadPreview(),this.elements.bigPlay&&minplayer.click(this.elements.bigPlay.unbind(),function(b){b.preventDefault();minplayer.showAll();
jQuery(this).hide();a.play()}),a.unbind("loadstart").bind("loadstart",function(a){return function(){a.busy.setFlag("media",!0);a.bigPlay.setFlag("media",!0);a.previewFlag.setFlag("media",!0);a.checkVisibility()}}(this)),a.bind("waiting",function(a){return function(){a.busy.setFlag("media",!0);a.checkVisibility()}}(this)),a.bind("loadeddata",function(a){return function(){a.busy.setFlag("media",!1);a.checkVisibility()}}(this)),a.bind("playing",function(b){return function(){b.busy.setFlag("media",!1);
b.bigPlay.setFlag("media",!1);"audio"!==a.mediaFile.type&&b.previewFlag.setFlag("media",!1);b.checkVisibility()}}(this)),a.bind("pause",function(a){return function(){a.bigPlay.setFlag("media",!0);a.checkVisibility()}}(this)))})};
minplayer.playLoader.prototype.loadPreview=function(){if(this.enabled){if(this.elements.preview){if(this.options.preview)return this.elements.preview.addClass("has-preview").show(),this.preview=new minplayer.image(this.elements.preview,this.options),this.preview.load(this.options.preview),!0;this.elements.preview.hide()}return!1}};
minplayer.playLoader.prototype.checkVisibility=function(){this.enabled&&(this.busy.flag?this.elements.busy.show():this.elements.busy.hide(),this.bigPlay.flag?this.elements.bigPlay.show():this.elements.bigPlay.hide(),this.previewFlag.flag?this.elements.preview.show():this.elements.preview.hide(),(this.bigPlay.flag||this.busy.flag||this.previewFlag.flag)&&this.display.show(),!this.bigPlay.flag&&(!this.busy.flag&&!this.previewFlag.flag)&&this.display.hide())};minplayer=minplayer||{};
minplayer.players=minplayer.players||{};minplayer.players.base=function(a,b,c){minplayer.display.call(this,"media",a,b,c)};minplayer.players.base.prototype=new minplayer.display;minplayer.players.base.prototype.constructor=minplayer.players.base;minplayer.players.base.prototype.getElements=function(){var a=minplayer.display.prototype.getElements.call(this);return jQuery.extend(a,{media:this.options.mediaelement})};minplayer.players.base.getPriority=function(){return 0};
minplayer.players.base.getMediaId=function(){return""};minplayer.players.base.canPlay=function(){return!1};
minplayer.players.base.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.options.pluginName="basePlayer";this.mediaFile=this.options.file;this.options.autoplay=this.options.autoplay||this.mediaFile.stream;this.clear();this.playerFound()||this.addPlayer();this.player=this.getPlayer();minplayer.click(this.display,function(a){return function(){minplayer.showAll();a.playing?a.pause():a.play()}}(this));jQuery(document).bind("keydown",function(a){return function(b){if(a.hasFocus)switch(b.preventDefault(),
b.keyCode){case 32:case 179:a.playing?a.pause():a.play();break;case 38:a.setVolumeRelative(0.1);break;case 40:a.setVolumeRelative(-0.1);break;case 37:case 227:a.seekRelative(-0.05);break;case 39:case 228:a.seekRelative(0.05)}}}(this))};minplayer.players.base.prototype.addPlayer=function(){this.elements.media&&this.elements.media.remove();this.elements.media=jQuery(this.create());this.display.html(this.elements.media)};
minplayer.players.base.prototype.destroy=function(){minplayer.plugin.prototype.destroy.call(this);this.clear()};minplayer.players.base.prototype.clear=function(){this.playerReady=!1;this.reset();this.player&&jQuery(this.player).unbind()};
minplayer.players.base.prototype.reset=function(){this.duration=new minplayer.async;this.currentTime=new minplayer.async;this.bytesLoaded=new minplayer.async;this.bytesTotal=new minplayer.async;this.bytesStart=new minplayer.async;this.volume=new minplayer.async;this.loading=this.playing=this.hasFocus=!1;this.trigger("pause");this.trigger("waiting");this.trigger("progress",{loaded:0,total:0,start:0});this.trigger("timeupdate",{currentTime:0,duration:0})};
minplayer.players.base.prototype.onReady=function(){this.playerReady||(this.playerReady=!0,this.setVolume(this.options.volume/100),this.loading=!0,this.poll(function(a){return function(){a.loading&&a.getBytesLoaded(function(b){a.getBytesTotal(function(c){if(b||c){var d=0;a.getBytesStart(function(a){d=a});a.trigger("progress",{loaded:b,total:c,start:d});b>=c&&(a.loading=!1)}})});return a.loading}}(this),1E3),this.ready(),this.trigger("loadstart"))};
minplayer.players.base.prototype.onPlaying=function(){this.trigger("playing");this.playing=this.hasFocus=!0;this.poll(function(a){return function(){a.playing&&a.getCurrentTime(function(b){a.getDuration(function(c){b=parseFloat(b);c=parseFloat(c);(b||c)&&a.trigger("timeupdate",{currentTime:b,duration:c})})});return a.playing}}(this),1E3)};minplayer.players.base.prototype.onPaused=function(){this.trigger("pause");this.playing=this.hasFocus=!1};
minplayer.players.base.prototype.onComplete=function(){if(this.playing)this.onPaused();this.hasFocus=this.loading=this.playing=!1;this.trigger("ended")};minplayer.players.base.prototype.onLoaded=function(){this.options.autoplay&&this.play();this.trigger("loadeddata")};minplayer.players.base.prototype.onWaiting=function(){this.trigger("waiting")};minplayer.players.base.prototype.onError=function(a){this.hasFocus=!1;this.trigger("error",a)};
minplayer.players.base.prototype.isReady=function(){return this.player&&this.playerReady};minplayer.players.base.prototype.hasPlayLoader=function(){return!1};minplayer.players.base.prototype.hasController=function(){return!1};minplayer.players.base.prototype.playerFound=function(){return!1};minplayer.players.base.prototype.create=function(){this.reset();return null};minplayer.players.base.prototype.getPlayer=function(){return this.player};
minplayer.players.base.prototype.load=function(a){var b="string"==typeof this.mediaFile?this.mediaFile:this.mediaFile.path;return a&&this.isReady()&&a.path!=b?(this.reset(),this.mediaFile=a,!0):!1};minplayer.players.base.prototype.play=function(){return this.isReady()};minplayer.players.base.prototype.pause=function(){return this.isReady()};minplayer.players.base.prototype.stop=function(){this.hasFocus=this.loading=this.playing=!1;return this.isReady()};
minplayer.players.base.prototype.seekRelative=function(a){this.getCurrentTime(function(b){return function(c){b.getDuration(function(d){if(d){var e=0,e=-1<a&&1>a?(c/d+parseFloat(a))*d:c+parseFloat(a);b.seek(e)}})}}(this))};minplayer.players.base.prototype.seek=function(){return this.isReady()};minplayer.players.base.prototype.getValue=function(a,b){if(this.isReady()){var c=this.player[a]();void 0!==c&&null!==c&&b(c)}};
minplayer.players.base.prototype.setVolumeRelative=function(a){this.getVolume(function(b){return function(c){c+=parseFloat(a);c=0>c?0:c;b.setVolume(1<c?1:c)}}(this))};minplayer.players.base.prototype.setVolume=function(a){this.trigger("volumeupdate",a);return this.isReady()};minplayer.players.base.prototype.getVolume=function(a){return this.volume.get(a)};minplayer.players.base.prototype.getCurrentTime=function(a){return this.currentTime.get(a)};minplayer.players.base.prototype.getDuration=function(a){return this.duration.get(a)};
minplayer.players.base.prototype.getBytesStart=function(a){return this.bytesStart.get(a)};minplayer.players.base.prototype.getBytesLoaded=function(a){return this.bytesLoaded.get(a)};minplayer.players.base.prototype.getBytesTotal=function(a){return this.bytesTotal.get(a)};minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.html5=function(a,b,c){minplayer.players.base.call(this,a,b,c)};minplayer.players.html5.prototype=new minplayer.players.base;
minplayer.players.html5.prototype.constructor=minplayer.players.html5;minplayer.players.html5.getPriority=function(){return 10};
minplayer.players.html5.canPlay=function(a){switch(a.mimetype){case "video/ogg":return!!minplayer.playTypes.videoOGG;case "video/mp4":case "video/x-mp4":case "video/m4v":case "video/x-m4v":return!!minplayer.playTypes.videoH264;case "video/x-webm":case "video/webm":case "application/octet-stream":return!!minplayer.playTypes.videoWEBM;case "audio/ogg":return!!minplayer.playTypes.audioOGG;case "audio/mpeg":return!!minplayer.playTypes.audioMP3;case "audio/mp4":return!!minplayer.playTypes.audioMP4;default:return!1}};
minplayer.players.html5.prototype.construct=function(){minplayer.players.base.prototype.construct.call(this);this.options.pluginName="html5";this.addPlayerEvents()};minplayer.players.html5.prototype.addPlayerEvent=function(a,b){this.player&&this.player.addEventListener(a,function(c){var d=a+"Event";c[d]&&c.player.removeEventListener(a,c[d],!1);c[d]=function(a){b.call(c,a)};return c[d]}(this),!1)};
minplayer.players.html5.prototype.addPlayerEvents=function(){if(this.player){this.addPlayerEvent("abort",function(){this.trigger("abort")});this.addPlayerEvent("loadstart",function(){this.onReady()});this.addPlayerEvent("loadeddata",function(){this.onLoaded()});this.addPlayerEvent("loadedmetadata",function(){this.onLoaded()});this.addPlayerEvent("canplaythrough",function(){this.onLoaded()});this.addPlayerEvent("ended",function(){this.onComplete()});this.addPlayerEvent("pause",function(){this.onPaused()});
this.addPlayerEvent("play",function(){this.onPlaying()});this.addPlayerEvent("playing",function(){this.onPlaying()});var a=!1;this.addPlayerEvent("error",function(){a||(a=!0,this.trigger("error","An error occured - "+this.player.error.code))});this.addPlayerEvent("waiting",function(){this.onWaiting()});this.addPlayerEvent("durationchange",function(){this.duration.set(this.player.duration);this.trigger("durationchange",{duration:this.player.duration})});this.addPlayerEvent("progress",function(a){this.bytesTotal.set(a.total);
this.bytesLoaded.set(a.loaded)});return!0}return!1};minplayer.players.html5.prototype.onReady=function(){minplayer.players.base.prototype.onReady.call(this);if(minplayer.isAndroid)this.onLoaded();if(minplayer.isIDevice){this.play();var a=this;setTimeout(function(){a.pause();a.onLoaded()},1)}};minplayer.players.html5.prototype.playerFound=function(){return 0<this.display.find(this.mediaFile.type).length};
minplayer.players.html5.prototype.create=function(){minplayer.players.base.prototype.create.call(this);var a=jQuery(document.createElement(this.mediaFile.type)).attr(this.options.attributes).append(jQuery(document.createElement("source")).attr({src:this.mediaFile.path}));a.eq(0)[0].setAttribute("width","100%");a.eq(0)[0].setAttribute("height","100%");a.eq(0)[0].setAttribute("autobuffer",!0);var b=this.options.autoload?"auto":"metadata",b=minplayer.isIDevice?"metadata":b;a.eq(0)[0].setAttribute("preload",
b);return a};minplayer.players.html5.prototype.getPlayer=function(){return this.elements.media.eq(0)[0]};minplayer.players.html5.prototype.load=function(a){if(minplayer.players.base.prototype.load.call(this,a)){var b=this.elements.media.attr("src");b||(b=jQuery("source",this.elements.media).eq(0).attr("src"));if(b!=a.path)return this.addPlayer(),this.player=this.getPlayer(),this.addPlayerEvents(),a='<source src="'+a.path+'"></source>',this.elements.media.removeAttr("src").empty().html(a),!0}return!1};
minplayer.players.html5.prototype.play=function(){return minplayer.players.base.prototype.play.call(this)?(this.player.play(),!0):!1};minplayer.players.html5.prototype.pause=function(){return minplayer.players.base.prototype.pause.call(this)?(this.player.pause(),!0):!1};minplayer.players.html5.prototype.stop=function(){return minplayer.players.base.prototype.stop.call(this)?(this.player.pause(),this.player.src="",!0):!1};
minplayer.players.html5.prototype.seek=function(a){return minplayer.players.base.prototype.seek.call(this,a)?(this.player.currentTime=a,!0):!1};minplayer.players.html5.prototype.setVolume=function(a){return minplayer.players.base.prototype.setVolume.call(this,a)?(this.player.volume=a,!0):!1};minplayer.players.html5.prototype.getVolume=function(a){this.isReady()&&a(this.player.volume)};minplayer.players.html5.prototype.getDuration=function(a){this.isReady()&&a(this.player.duration)};
minplayer.players.html5.prototype.getCurrentTime=function(a){this.isReady()&&a(this.player.currentTime)};minplayer.players.html5.prototype.getBytesLoaded=function(a){if(this.isReady()){var b=0;this.bytesLoaded.value?b=this.bytesLoaded.value:this.player.buffered&&0<this.player.buffered.length&&this.player.buffered.end&&this.player.duration?b=this.player.buffered.end(0):void 0!=this.player.bytesTotal&&(0<this.player.bytesTotal&&void 0!=this.player.bufferedBytes)&&(b=this.player.bufferedBytes);a(b)}};
minplayer.players.html5.prototype.getBytesTotal=function(a){if(this.isReady()){var b=0;this.bytesTotal.value?b=this.bytesTotal.value:this.player.buffered&&0<this.player.buffered.length&&this.player.buffered.end&&this.player.duration?b=this.player.duration:void 0!=this.player.bytesTotal&&(0<this.player.bytesTotal&&void 0!=this.player.bufferedBytes)&&(b=this.player.bytesTotal);a(b)}};minplayer=minplayer||{};minplayer.players=minplayer.players||{};
minplayer.players.flash=function(a,b,c){minplayer.players.base.call(this,a,b,c)};minplayer.players.flash.prototype=new minplayer.players.base;minplayer.players.flash.prototype.constructor=minplayer.players.flash;minplayer.players.flash.prototype.construct=function(){minplayer.players.base.prototype.construct.call(this);this.options.pluginName="flash"};minplayer.players.flash.getPriority=function(){return 0};minplayer.players.flash.canPlay=function(){return!1};
minplayer.players.flash.prototype.getFlash=function(a){var b=window.location.protocol;":"==b.charAt(b.length-1)&&(b=b.substring(0,b.length-1));var c=document.createElement("script"),b=b+"://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js";c.src=b;b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(c,b);var d=this;setTimeout(function h(){"undefined"!==typeof swfobject?swfobject.embedSWF(a.swf,a.id,a.width,a.height,"9.0.0",!1,a.flashvars,{allowscriptaccess:"always",allowfullscreen:"true",
wmode:a.wmode,quality:"high"},{id:a.id,name:a.id,playerType:"flash"},function(a){d.player=a.ref}):setTimeout(h,200)},200);return'<div id="'+a.id+'"></div>'};minplayer.players.flash.prototype.playerFound=function(){return 0<this.display.find('object[playerType="flash"]').length};minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.minplayer=function(a,b,c){minplayer.players.flash.call(this,a,b,c)};minplayer.players.minplayer.prototype=new minplayer.players.flash;
minplayer.players.minplayer.prototype.constructor=minplayer.players.minplayer;minplayer.players.minplayer.prototype.construct=function(){minplayer.players.flash.prototype.construct.call(this);this.options.pluginName="minplayer"};window.onFlashPlayerReady=function(a){for(var a=minplayer.get(a,"media"),b=a.length;b--;)a[b].onReady()};window.onFlashPlayerUpdate=function(a,b){for(var c=minplayer.get(a,"media"),d=c.length;d--;)c[d].onMediaUpdate(b)};
window.onFlashPlayerDebug=function(a){console&&console.log&&console.log(a)};minplayer.players.minplayer.getPriority=function(a){return a.stream?100:1};minplayer.players.minplayer.canPlay=function(a){return a.stream?!0:!(0<=jQuery.inArray(a.mimetype,["video/x-webm","video/webm","application/octet-stream"]))&&("video"==a.type||"audio"==a.type)};
minplayer.players.minplayer.prototype.create=function(){this.options=jQuery.extend({swfplayer:"flash/minplayer.swf"},this.options);minplayer.players.flash.prototype.create.call(this);return this.getFlash({swf:this.options.swfplayer,id:this.options.id+"_player",width:"100%",height:"100%",flashvars:{id:this.options.id,debug:this.options.debug,config:"nocontrols",file:this.mediaFile.path,stream:this.mediaFile.stream,autostart:this.options.autoplay,autoload:this.options.autoload},wmode:this.options.wmode})};
minplayer.players.minplayer.prototype.onMediaUpdate=function(a){switch(a){case "mediaMeta":this.onLoaded();break;case "mediaPlaying":if(this.minplayerloaded)this.onPlaying();break;case "mediaPaused":this.minplayerloaded=!0;this.onPaused();break;case "mediaComplete":this.onComplete()}};minplayer.players.minplayer.prototype.clear=function(){minplayer.players.flash.prototype.clear.call(this);this.minplayerloaded=this.options.autoplay};
minplayer.players.minplayer.prototype.load=function(a){return minplayer.players.flash.prototype.load.call(this,a)?(this.player.loadMedia(a.path,a.stream),!0):!1};minplayer.players.minplayer.prototype.play=function(){return minplayer.players.flash.prototype.play.call(this)?(this.player.playMedia(),!0):!1};minplayer.players.minplayer.prototype.pause=function(){return minplayer.players.flash.prototype.pause.call(this)?(this.player.pauseMedia(),!0):!1};
minplayer.players.minplayer.prototype.stop=function(){return minplayer.players.flash.prototype.stop.call(this)?(this.player.stopMedia(),!0):!1};minplayer.players.minplayer.prototype.seek=function(a){return minplayer.players.flash.prototype.seek.call(this,a)?(this.player.seekMedia(a),!0):!1};minplayer.players.minplayer.prototype.setVolume=function(a){return minplayer.players.flash.prototype.setVolume.call(this,a)?(this.player.setVolume(a),!0):!1};
minplayer.players.minplayer.prototype.getVolume=function(a){this.isReady()&&a(this.player.getVolume())};minplayer.players.minplayer.prototype.getDuration=function(a){if(this.isReady()){var b=this.player.getDuration();b?a(b):this.poll(function(c){return function(){(b=c.player.getDuration())&&a(b);return!b}}(this),1E3)}};minplayer.players.minplayer.prototype.getCurrentTime=function(a){this.isReady()&&a(this.player.getCurrentTime())};
minplayer.players.minplayer.prototype.getBytesLoaded=function(a){this.isReady()&&a(this.player.getMediaBytesLoaded())};minplayer.players.minplayer.prototype.getBytesTotal=function(a){this.isReady()&&a(this.player.getMediaBytesTotal())};minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.youtube=function(a,b,c){this.quality="default";minplayer.players.base.call(this,a,b,c)};minplayer.players.youtube.prototype=new minplayer.players.base;
minplayer.players.youtube.prototype.constructor=minplayer.players.youtube;minplayer.players.youtube.prototype.construct=function(){minplayer.players.base.prototype.construct.call(this);this.options.pluginName="youtube"};minplayer.players.youtube.getPriority=function(){return 10};minplayer.players.youtube.canPlay=function(a){return"video/youtube"===a.mimetype?!0:0===a.path.search(/^http(s)?\:\/\/(www\.)?youtube\.com/i)};
minplayer.players.youtube.getMediaId=function(a){var b=/^http[s]?\:\/\/(www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_\-]+)/i;return 0===a.path.search(b)?a.path.match(b)[2]:a.path};minplayer.players.youtube.getImage=function(a,b,c){c("http://img.youtube.com/vi/"+a.id+"/"+("thumbnail"==b?"1":"0")+".jpg")};
minplayer.players.youtube.prototype.setPlayerState=function(a){switch(a){case YT.PlayerState.BUFFERING:this.onWaiting();break;case YT.PlayerState.PAUSED:this.onPaused();break;case YT.PlayerState.PLAYING:this.onPlaying();break;case YT.PlayerState.ENDED:this.onComplete()}};minplayer.players.youtube.prototype.onReady=function(){minplayer.players.base.prototype.onReady.call(this);this.options.autoplay||this.pause();this.onLoaded()};
minplayer.players.youtube.prototype.playerFound=function(){return 0<this.display.find("iframe#"+this.options.id+"-player.youtube-player").length};minplayer.players.youtube.prototype.onPlayerStateChange=function(a){this.setPlayerState(a.data)};minplayer.players.youtube.prototype.onQualityChange=function(a){this.quality=a.data};minplayer.players.youtube.prototype.hasPlayLoader=function(a){return minplayer.hasTouch||!a};minplayer.players.youtube.prototype.hasController=function(){return minplayer.isIDevice};
minplayer.players.youtube.prototype.create=function(){minplayer.players.base.prototype.create.call(this);var a=document.createElement("script");a.src="https://www.youtube.com/player_api";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);this.playerId=this.options.id+"-player";this.poll(function(a){return function(){var b=0<jQuery("#"+a.playerId).length;if(b=(b=b&&"YT"in window)&&"function"==typeof YT.Player){jQuery("#"+a.playerId).addClass("youtube-player");var e=location.protocol,
e=e+("//"+location.hostname),e=e+(location.port&&":"+location.port),h={};minplayer.isIDevice?h.origin=e:h={enablejsapi:minplayer.isIDevice?0:1,origin:e,wmode:"opaque",controls:minplayer.isAndroid?1:0};a.player=new YT.Player(a.playerId,{height:"100%",width:"100%",frameborder:0,videoId:a.mediaFile.id,playerVars:h,events:{onReady:function(b){a.onReady(b)},onStateChange:function(b){a.onPlayerStateChange(b)},onPlaybackQualityChange:function(b){a.onQualityChange(b)},onError:function(b){a.onError(b)}}})}return!b}}(this),
200);return jQuery(document.createElement("div")).attr({id:this.playerId})};minplayer.players.youtube.prototype.load=function(a){return minplayer.players.base.prototype.load.call(this,a)?(this.player.loadVideoById(a.id,0,this.quality),!0):!1};minplayer.players.youtube.prototype.play=function(){return minplayer.players.base.prototype.play.call(this)?(this.onWaiting(),this.player.playVideo(),!0):!1};
minplayer.players.youtube.prototype.pause=function(){return minplayer.players.base.prototype.pause.call(this)?(this.player.pauseVideo(),!0):!1};minplayer.players.youtube.prototype.stop=function(){return minplayer.players.base.prototype.stop.call(this)?(this.player.stopVideo(),!0):!1};minplayer.players.youtube.prototype.seek=function(a){return minplayer.players.base.prototype.seek.call(this,a)?(this.onWaiting(),this.player.seekTo(a,!0),!0):!1};
minplayer.players.youtube.prototype.setVolume=function(a){return minplayer.players.base.prototype.setVolume.call(this,a)?(this.player.setVolume(100*a),!0):!1};minplayer.players.youtube.prototype.getVolume=function(a){this.getValue("getVolume",a)};minplayer.players.youtube.prototype.getDuration=function(a){this.getValue("getDuration",a)};minplayer.players.youtube.prototype.getCurrentTime=function(a){this.getValue("getCurrentTime",a)};
minplayer.players.youtube.prototype.getBytesStart=function(a){this.getValue("getVideoStartBytes",a)};minplayer.players.youtube.prototype.getBytesLoaded=function(a){this.getValue("getVideoBytesLoaded",a)};minplayer.players.youtube.prototype.getBytesTotal=function(a){this.getValue("getVideoBytesTotal",a)};minplayer=minplayer||{};minplayer.players=minplayer.players||{};minplayer.players.vimeo=function(a,b,c){minplayer.players.base.call(this,a,b,c)};minplayer.players.vimeo.prototype=new minplayer.players.base;
minplayer.players.vimeo.prototype.constructor=minplayer.players.vimeo;minplayer.players.vimeo.prototype.construct=function(){minplayer.players.base.prototype.construct.call(this);this.options.pluginName="vimeo"};minplayer.players.vimeo.getPriority=function(){return 10};minplayer.players.vimeo.canPlay=function(a){return"video/vimeo"===a.mimetype?!0:0===a.path.search(/^http(s)?\:\/\/(www\.)?vimeo\.com/i)};minplayer.players.vimeo.prototype.hasPlayLoader=function(a){return minplayer.hasTouch||!a};
minplayer.players.vimeo.prototype.hasController=function(){return minplayer.hasTouch};minplayer.players.vimeo.getMediaId=function(a){var b=/^http[s]?\:\/\/(www\.)?vimeo\.com\/(\?v\=)?([0-9]+)/i;return 0===a.path.search(b)?a.path.match(b)[3]:a.path};minplayer.players.vimeo.getImage=function(a,b,c){jQuery.ajax({url:"http://vimeo.com/api/v2/video/"+a.id+".json",dataType:"jsonp",success:function(a){c(a[0].thumbnail_large)}})};minplayer.players.vimeo.prototype.reset=function(){minplayer.players.base.prototype.reset.call(this)};
minplayer.players.vimeo.prototype.create=function(){minplayer.players.base.prototype.create.call(this);var a=document.createElement("script");a.src="http://a.vimeocdn.com/js/froogaloop2.min.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);var c=document.createElement("iframe");c.setAttribute("id",this.options.id+"-player");c.setAttribute("type","text/html");c.setAttribute("width","100%");c.setAttribute("height","100%");c.setAttribute("frameborder","0");jQuery(c).addClass("vimeo-player");
a="http://player.vimeo.com/video/"+(this.mediaFile.id+"?");a+=jQuery.param({wmode:"opaque",api:1,player_id:this.options.id+"-player",title:0,byline:0,portrait:0,autoplay:this.options.autoplay,loop:this.options.loop});c.setAttribute("src",a);this.poll(function(a){return function(){if(window.Froogaloop){a.player=window.Froogaloop(c);var b=0;a.player.addEvent("ready",function(){clearTimeout(b);a.onReady();a.onError("")});b=setTimeout(function(){a.onReady();a.onError("Unable to play video.")},2E3)}return!window.Froogaloop}}(this),
200);this.trigger("loadstart");return c};
minplayer.players.vimeo.prototype.onReady=function(){this.player.addEvent("loadProgress",function(a){return function(b){a.duration.set(parseFloat(b.duration));a.bytesLoaded.set(b.bytesLoaded);a.bytesTotal.set(b.bytesTotal)}}(this));this.player.addEvent("playProgress",function(a){return function(b){a.duration.set(parseFloat(b.duration));a.currentTime.set(parseFloat(b.seconds))}}(this));this.player.addEvent("play",function(a){return function(){a.onPlaying()}}(this));this.player.addEvent("pause",function(a){return function(){a.onPaused()}}(this));
this.player.addEvent("finish",function(a){return function(){a.onComplete()}}(this));minplayer.players.base.prototype.onReady.call(this);this.onLoaded()};minplayer.players.vimeo.prototype.clear=function(){this.player&&this.player.api("unload");minplayer.players.base.prototype.clear.call(this)};minplayer.players.vimeo.prototype.load=function(a){return minplayer.players.base.prototype.load.call(this,a)?(this.construct(),!0):!1};
minplayer.players.vimeo.prototype.play=function(){return minplayer.players.base.prototype.play.call(this)?(this.player.api("play"),!0):!1};minplayer.players.vimeo.prototype.pause=function(){return minplayer.players.base.prototype.pause.call(this)?(this.player.api("pause"),!0):!1};minplayer.players.vimeo.prototype.stop=function(){return minplayer.players.base.prototype.stop.call(this)?(this.player.api("unload"),!0):!1};
minplayer.players.vimeo.prototype.seek=function(a){return minplayer.players.base.prototype.seek.call(this,a)?(this.player.api("seekTo",a),!0):!1};minplayer.players.vimeo.prototype.setVolume=function(a){return minplayer.players.base.prototype.setVolume.call(this,a)?(this.volume.set(a),this.player.api("setVolume",a),!0):!1};minplayer.players.vimeo.prototype.getVolume=function(a){this.player.api("getVolume",function(b){a(b)})};
minplayer.players.vimeo.prototype.getDuration=function(a){this.isReady()&&(this.duration.value?a(this.duration.value):this.player.api("getDuration",function(b){a(b)}))};minplayer=minplayer||{};minplayer.controller=function(a,b){minplayer.display.call(this,"controller",a,b)};minplayer.controller.prototype=new minplayer.display;minplayer.controller.prototype.constructor=minplayer.controller;
minplayer.formatTime=function(a){var a=a||0,b=0,c=0,d=0,e="",d=Math.floor(a/3600),a=a-3600*d,c=Math.floor(a/60),b=Math.floor((a-60*c)%60);d&&(e+=String(d),e+=":");e+=10<=c?String(c):"0"+String(c);e=e+":"+(10<=b?String(b):"0"+String(b));return{time:e,units:""}};minplayer.controller.prototype.getElements=function(){var a=minplayer.display.prototype.getElements.call(this);return jQuery.extend(a,{play:null,pause:null,fullscreen:null,seek:null,progress:null,volume:null,timer:null})};
minplayer.controller.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.options.pluginName="controller";this.dragging=!1;this.vol=0;this.elements.seek&&(this.seekBar=this.elements.seek.slider({range:"min",create:function(a){jQuery(".ui-slider-range",a.target).addClass("ui-state-active")}}));this.elements.volume&&(this.volumeBar=this.elements.volume.slider({range:"min",orientation:"vertical"}));this.get("player",function(a){this.elements.fullscreen&&minplayer.click(this.elements.fullscreen.unbind(),
function(){a.toggleFullScreen()}).css({pointer:"hand"})});this.get("media",function(a){a.hasController()?this.hide():(this.elements.pause&&(minplayer.click(this.elements.pause.unbind(),function(b){return function(c){c.preventDefault();b.playPause(!1,a)}}(this)),a.bind("pause",function(a){return function(){a.setPlayPause(!0)}}(this))),this.elements.play&&(minplayer.click(this.elements.play.unbind(),function(b){return function(c){c.preventDefault();b.playPause(!0,a)}}(this)),a.bind("playing",function(a){return function(){a.setPlayPause(!1)}}(this))),
this.elements.duration&&(a.bind("durationchange",function(a){return function(c,d){a.setTimeString("duration",d.duration)}}(this)),a.getDuration(function(a){return function(c){a.setTimeString("duration",c)}}(this))),this.elements.progress&&a.bind("progress",function(a){return function(c,d){a.elements.progress.width((d.total?100*(d.loaded/d.total):0)+"%")}}(this)),(this.seekBar||this.elements.timer)&&a.bind("timeupdate",function(a){return function(c,d){if(!a.dragging){var e=0;d.duration&&(e=100*(d.currentTime/
d.duration));a.seekBar&&a.seekBar.slider("option","value",e);a.setTimeString("timer",d.currentTime)}}}(this)),this.seekBar&&this.seekBar.slider({start:function(a){return function(){a.dragging=!0}}(this),stop:function(b){return function(c,d){b.dragging=!1;a.getDuration(function(b){a.seek(d.value/100*b)})}}(this),slide:function(b){return function(c,d){a.getDuration(function(c){c*=d.value/100;b.dragging||a.seek(c);b.setTimeString("timer",c)})}}(this)}),this.elements.mute&&minplayer.click(this.elements.mute,
function(b){return function(c){c.preventDefault();c=b.volumeBar.slider("option","value");0<c?(b.vol=c,b.volumeBar.slider("option","value",0),a.setVolume(0)):(b.volumeBar.slider("option","value",b.vol),a.setVolume(b.vol/100))}}(this)),this.volumeBar&&(this.volumeBar.slider({slide:function(b,c){a.setVolume(c.value/100)}}),a.bind("volumeupdate",function(a){return function(c,d){a.volumeBar.slider("option","value",100*d)}}(this)),a.getVolume(function(a){return function(c){a.volumeBar.slider("option","value",
100*c)}}(this))))});this.ready()};minplayer.controller.prototype.setPlayPause=function(a){this.elements.play&&this.elements.play.css("display",a?"inherit":"none");this.elements.pause&&this.elements.pause.css("display",a?"none":"inherit")};minplayer.controller.prototype.playPause=function(a,b){var c=a?"play":"pause";this.display.trigger(c);this.setPlayPause(!a);if(b)b[c]()};minplayer.controller.prototype.setTimeString=function(a,b){this.elements[a]&&this.elements[a].text(minplayer.formatTime(b).time)};
jQuery.fn.osmplayer||(jQuery.fn.osmplayer=function(a){return jQuery(this).each(function(){a=a||{};a.id=a.id||jQuery(this).attr("id")||Math.random();minplayer.plugins[a.id]||(a.template=a.template||"default",osmplayer[a.template]?new osmplayer[a.template](jQuery(this),a):new osmplayer(jQuery(this),a))})});osmplayer=function(a,b){minplayer.call(this,a,b)};osmplayer.prototype=new minplayer;osmplayer.prototype.constructor=osmplayer;
osmplayer.prototype.create=function(a,b,c){return minplayer.prototype.create.call(this,a,"osmplayer",c)};
osmplayer.prototype.construct=function(){this.options=jQuery.extend({playlist:"",node:{},swfplayer:"minplayer/flash/minplayer.swf",logo:"logo.png",link:"http://www.mediafront.org"},this.options);minplayer.prototype.construct.call(this);this.playQueue=[];this.playIndex=0;this.create("playlist","osmplayer");this.get("playlist",function(a){a.bind("nodeLoad",function(a){return function(c,d){a.loadNode(d)}}(this))});this.get("media",function(a){return function(b){b.bind("ended",function(){a.options.autoplay=
!0;a.playNext()})}}(this));this.options.node&&this.loadNode(this.options.node)};osmplayer.prototype.fullScreenElement=function(){return this.elements.minplayer};
osmplayer.prototype.loadNode=function(a){if(a&&a.mediafiles){var b=a.mediafiles.media;if(b){this.playQueue.length=0;this.playQueue=[];this.playIndex=0;var c=null,d=[],d=minplayer.isAndroid||minplayer.isIDevice?["media"]:["intro","commercial","prereel","media","postreel"];jQuery.each(d,function(a){return function(d,i){if(c=a.addToQueue(b[i]))c.queueType=i}}(this))}osmplayer.getImage(a.mediafiles,"preview",function(a){return function(b){a.options.preview=b.path;a.playLoader&&a.playLoader.initialize()}}(this));
this.playNext()}};osmplayer.prototype.addToQueue=function(a){(a=minplayer.getMediaFile(a))&&this.playQueue.push(a);return a};osmplayer.prototype.playNext=function(){this.playQueue.length>this.playIndex?(this.load(this.playQueue[this.playIndex]),this.playIndex++):this.options.repeat?(this.playIndex=0,this.playNext()):0<this.playQueue.length?(this.options.autoplay=!1,this.playIndex=0,this.playNext()):this.media&&this.media.stop()};
osmplayer.getImage=function(a,b,c){var d="",e=a.image;if(e)if(e[b])d=e[b];else if(e.image)d=e.image;else for(b in e)if(e.hasOwnProperty(b)){d=e[b];break}if(d)c(new minplayer.file(d));else if(a=minplayer.getMediaFile(a.media.media))(d=minplayer.players[a.player])&&"function"===typeof d.getImage&&d.getImage(a,b,function(a){c(new minplayer.file(a))})};var osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};
osmplayer.parser["default"]={priority:1,valid:function(){return!0},getType:function(){return"json"},getFeed:function(a,b,c){a=a.replace(/(.*)\??(.*)/i,"$1");return a=a+("?start-index="+b)+("&max-results="+c)},parse:function(a){return a}};osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};
osmplayer.parser.youtube={priority:10,valid:function(a){return 0===a.search(/^http(s)?\:\/\/gdata\.youtube\.com/i)},getType:function(){return"jsonp"},getFeed:function(a,b,c){a=a.replace(/(.*)\??(.*)/i,"$1");a=a+("?start-index="+(b+1))+("&max-results="+c);return a+="&v=2&alt=jsonc"},parse:function(a){var a=a.data,b={total_rows:a.totalItems,nodes:[]},c;for(c in a.items)if(a.items.hasOwnProperty(c)){var d=a.items[c];b.nodes.push({title:d.title,description:d.description,mediafiles:{image:{thumbnail:{path:d.thumbnail.sqDefault},
image:{path:d.thumbnail.hqDefault}},media:{media:{player:"youtube",id:d.id}}}})}return b}};osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};
osmplayer.parser.rss={priority:8,valid:function(a){a=a.replace(/(.*)\??(.*)/i,"$1");return null!==a.match(/\.rss$/i)},getType:function(){return"xml"},getFeed:function(a){return a},parse:function(a){var b={total_rows:0,nodes:[]};jQuery("rss channel",a).find("item").each(function(){osmplayer.parser.rss.addRSSItem(b,jQuery(this))});return b},addRSSItem:function(a,b){a.total_rows++;a.nodes.push({title:b.find("title").text(),description:b.find("annotation").text(),mediafiles:{image:{image:{path:b.find("image").text()}},
media:{media:{path:b.find("location").text()}}}})}};osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};osmplayer.parser.asx={priority:8,valid:function(a){a=a.replace(/(.*)\??(.*)/i,"$1");return null!==a.match(/\.asx$/i)},getType:function(){return"xml"},getFeed:function(a){return a},parse:function(a){var b={total_rows:0,nodes:[]};jQuery("asx entry",a).each(function(){osmplayer.parser.rss.addRSSItem(b,jQuery(this))});return b}};osmplayer=osmplayer||{};osmplayer.parser=osmplayer.parser||{};
osmplayer.parser.xsfp={priority:8,valid:function(a){a=a.replace(/(.*)\??(.*)/i,"$1");return null!==a.match(/\.xml$/i)},getType:function(){return"xml"},getFeed:function(a){return a},parse:function(a){var b={total_rows:0,nodes:[]};jQuery("playlist trackList track",a).each(function(){osmplayer.parser.rss.addRSSItem(b,jQuery(this))});return b}};osmplayer=osmplayer||{};osmplayer.playlist=function(a,b){minplayer.display.call(this,"playlist",a,b)};osmplayer.playlist.prototype=new minplayer.display;
osmplayer.playlist.prototype.constructor=osmplayer.playlist;
osmplayer.playlist.prototype.construct=function(){this.options=jQuery.extend({vertical:!0,playlist:"",pageLimit:10,autoNext:!0,shuffle:!1,loop:!1,hysteresis:40,scrollSpeed:20,scrollMode:"auto"},this.options);minplayer.display.prototype.construct.call(this);this.nodes=[];this.page=-1;this.totalItems=0;this.currentItem=-1;this.playqueue=[];this.playqueuepos=0;this.playlist=this.options.playlist;this.scroll=null;this.orient={pos:this.options.vertical?"y":"x",pagePos:this.options.vertical?"pageY":"pageX",
offset:this.options.vertical?"top":"left",wrapperSize:this.options.vertical?"wrapperH":"wrapperW",minScroll:this.options.vertical?"minScrollY":"minScrollX",maxScroll:this.options.vertical?"maxScrollY":"maxScrollX",size:this.options.vertical?"height":"width"};this.pager=this.create("pager","osmplayer");this.pager.bind("nextPage",function(a){return function(){a.nextPage()}}(this));this.pager.bind("prevPage",function(a){return function(){a.prevPage()}}(this));this.next()&&this.options.autoNext&&this.get("media",
function(a){a.bind("ended",function(b){return function(){a.options.autoplay=!0;b.next()}}(this))});this.ready()};osmplayer.playlist.prototype.scrollTo=function(a,b){this.scroll&&(this.scroll.options.hideScrollbar=!1,this.options.vertical?this.scroll.scrollTo(0,a,0,b):this.scroll.scrollTo(a,0,0,b),this.scroll.options.hideScrollbar=!0)};
osmplayer.playlist.prototype.refreshScroll=function(){if(window.addEventListener){var a=this.elements.list,b=this.elements.scroll;if(!this.scroll&&0<a.length&&0<b.length&&a[this.orient.size]()>b[this.orient.size]()){this.scroll=new iScroll(this.elements.scroll.eq(0)[0],{hScroll:!this.options.vertical,hScrollbar:!this.options.vertical,vScroll:this.options.vertical,vScrollbar:this.options.vertical,hideScrollbar:!0});"auto"==this.options.scrollMode&&!minplayer.hasTouch&&this.elements.list.bind("mousemove",
function(a){return function(b){b.preventDefault();var c=a.display.offset()[a.orient.offset];a.mousePos=b[a.orient.pagePos];a.mousePos-=c}}(this)).bind("mouseenter",function(a){return function(b){b.preventDefault();a.scrolling=!0;var c=function(){if(a.scrolling){var b=a.scroll[a.orient.wrapperSize]/2,d=a.mousePos-b;if(Math.abs(d)>a.options.hysteresis){var h=a.options.hysteresis,d=a.options.scrollSpeed*(d+h*(0<d?-1:0)),d=d/b,b=a.scroll[a.orient.pos]-d,h=a.scroll[a.orient.minScroll]||0,t=a.scroll[a.orient.maxScroll];
b>=h?a.scrollTo(h):b<=t?a.scrollTo(t):a.scrollTo(d,!0)}setTimeout(c,30)}};c()}}(this)).bind("mouseleave",function(a){return function(b){b.preventDefault();a.scrolling=!1}}(this));if(!this.options.vertical){var c=0;jQuery.each(this.elements.list.children(),function(){c+=jQuery(this).outerWidth()});this.elements.list.width(c)}this.scroll.refresh();this.scroll.scrollTo(0,0,200)}else this.scroll&&(this.scroll.disable(),this.elements.list.unbind("mousemove").unbind("mouseenter").unbind("mouseleave"))}else{var d=
this;setTimeout(function(){d.refreshScroll.call(d)},200)}};
osmplayer.playlist.prototype.set=function(a,b){if("object"!==typeof a)this.trigger("error","Playlist must be an object to set");else if(a.hasOwnProperty("total_rows")){if(a.total_rows&&a.nodes.length){this.totalItems=a.total_rows;this.currentItem=0;(this.page+1)*this.options.pageLimit>=this.totalItems?this.pager.nextPage.hide():this.pager.nextPage.show();var c=null,d=a.nodes.length;this.elements.list.empty();this.nodes=[];for(var e=0;e<d;e++)c=this.create("teaser","osmplayer",this.elements.list),
c.setNode(a.nodes[e]),c.bind("nodeLoad",function(a,b){return function(){a.loadItem(b)}}(this,e)),this.nodes.push(c),b===e&&this.loadItem(e);this.refreshScroll();this.trigger("playlistLoad",a)}this.elements.playlist_busy&&this.elements.playlist_busy.hide()}else this.trigger("error","Unknown playlist format.")};osmplayer.playlist.prototype.setQueue=function(){this.playqueue.push({page:this.page,item:this.currentItem});this.playqueuepos=this.playqueue.length};
osmplayer.playlist.prototype.next=function(){var a=0,b=this.page;if(this.playqueuepos>=this.playqueue.length){if(this.options.shuffle)return a=Math.floor(Math.random()*this.totalItems),b=Math.floor(a/this.options.pageLimit),a%=this.options.pageLimit,this.load(b,a);a=this.currentItem+1;return a>=this.nodes.length?this.load(b+1,0):this.loadItem(a)}this.playqueuepos+=1;a=this.playqueue[this.playqueuepos];return this.load(a.page,a.item)};
osmplayer.playlist.prototype.prev=function(){this.playqueuepos-=1;this.playqueuepos=0>this.playqueuepos?0:this.playqueuepos;var a=this.playqueue[this.playqueuepos];return a?this.load(a.page,a.item):!1};osmplayer.playlist.prototype.loadItem=function(a){if(a<this.nodes.length){this.setQueue();var b=this.nodes[this.currentItem];b.select(!1);this.currentItem=a;b=this.nodes[a];b.select(!0);this.trigger("nodeLoad",b.node);return!0}return!1};
osmplayer.playlist.prototype.nextPage=function(a){return this.load(this.page+1,a)};osmplayer.playlist.prototype.prevPage=function(a){return this.load(this.page-1,a)};
osmplayer.playlist.prototype.load=function(a,b){if(this.playlist==this.options.playlist&&a==this.page)return this.loadItem(b);this.playlist=this.options.playlist;if(!this.playlist)return!1;if(a>Math.floor(this.totalItems/this.options.pageLimit))if(this.options.loop)b=a=0;else return!1;this.elements.playlist_busy&&this.elements.playlist_busy.show();a=a||0;a=0>a?0:a;this.setQueue();this.page=a;0==this.page?this.pager.prevPage.hide():this.pager.prevPage.show();if("object"==typeof this.playlist)return this.set(this.playlist,
b),this.playlist.endpoint&&(this.playlist=this.options.playlist=this.playlist.endpoint),!0;var c=osmplayer.parser["default"],d;for(d in osmplayer.parser)osmplayer.parser.hasOwnProperty(d)&&osmplayer.parser[d].valid(this.playlist)&&osmplayer.parser[d].priority>c.priority&&(c=osmplayer.parser[d]);var e=this,h=this;d={type:"GET",url:c.getFeed(this.playlist,this.page*this.options.pageLimit,this.options.pageLimit),success:function(a){e.set(c.parse(a),b)},error:function(a,b){h.elements.playlist_busy&&h.elements.playlist_busy.hide();
h.trigger("error",b)}};var i="";if(i=c.getType())d.dataType=i;jQuery.ajax(d);return!0};osmplayer=osmplayer||{};osmplayer.pager=function(a,b){minplayer.display.call(this,"pager",a,b)};osmplayer.pager.prototype=new minplayer.display;osmplayer.pager.prototype.constructor=osmplayer.pager;
osmplayer.pager.prototype.construct=function(){minplayer.display.prototype.construct.call(this);this.elements.prevPage&&(this.prevPage=this.elements.prevPage.click(function(a){return function(b){b.preventDefault();a.trigger("prevPage")}}(this)));this.elements.nextPage&&(this.nextPage=this.elements.nextPage.click(function(a){return function(b){b.preventDefault();a.trigger("nextPage")}}(this)))};osmplayer=osmplayer||{};
osmplayer.teaser=function(a,b){this.preview=null;minplayer.display.call(this,"teaser",a,b)};osmplayer.teaser.prototype=new minplayer.display;osmplayer.teaser.prototype.constructor=osmplayer.teaser;osmplayer.teaser.prototype.select=function(){};
osmplayer.teaser.prototype.setNode=function(a){this.node=a;this.elements.title&&this.elements.title.text(a.title);a.mediafiles&&a.mediafiles.image&&osmplayer.getImage(a.mediafiles,"thumbnail",function(a){return function(c){c&&a.elements.image&&(a.preview=new minplayer.image(a.elements.image),a.preview.load(c.path))}}(this));this.display.unbind("click").click(function(a){return function(c){c.preventDefault();a.trigger("nodeLoad",a.node)}}(this))};
